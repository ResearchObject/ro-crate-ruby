<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: ROCrate::Crate
  
    &mdash; Documentation by YARD 0.9.25
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "ROCrate::Crate";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span>
     &raquo; 
    <span class="title">Crate</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: ROCrate::Crate
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName"><span class='object_link'><a href="Directory.html" title="ROCrate::Directory (class)">Directory</a></span></span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next"><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></li>
          
            <li class="next"><span class='object_link'><a href="DataEntity.html" title="ROCrate::DataEntity (class)">DataEntity</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Directory.html" title="ROCrate::Directory (class)">Directory</a></span></li>
          
            <li class="next">ROCrate::Crate</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/ro_crate/model/crate.rb</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A Ruby abstraction of an RO-Crate.</p>


  </div>
</div>
<div class="tags">
  

</div>
  
    <h2>
      Constant Summary
      <small><a href="#" class="constants_summary_toggle">collapse</a></small>
    </h2>

    <dl class="constants">
      
        <dt id="IDENTIFIER-constant" class="">IDENTIFIER =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>./</span><span class='tstring_end'>&#39;</span></span><span class='period'>.</span><span class='id identifier rubyid_freeze'>freeze</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#contextual_entities-instance_method" title="#contextual_entities (instance method)">#<strong>contextual_entities</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute contextual_entities.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#data_entities-instance_method" title="#data_entities (instance method)">#<strong>data_entities</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute data_entities.</p>
</div></span>
  
</li>

    
  </ul>



  
  
  <h3 class="inherited">Attributes inherited from <span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Entity.html#crate-instance_method" title="ROCrate::Entity#crate (method)">#crate</a></span></p>


  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_id-class_method" title="format_id (class method)">.<strong>format_id</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#format_local_id-class_method" title="format_local_id (class method)">.<strong>format_local_id</strong>(id)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_all-instance_method" title="#add_all (instance method)">#<strong>add_all</strong>(source_directory, create_entities = true, include_hidden: false)  &#x21d2; Array&lt;DataEntity&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Recursively add the contents of the given source directory at the root of the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_contact_point-instance_method" title="#add_contact_point (instance method)">#<strong>add_contact_point</strong>(id, properties = {})  &#x21d2; ContactPoint </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new ROCrate::ContactPoint and add it to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_contextual_entity-instance_method" title="#add_contextual_entity (instance method)">#<strong>add_contextual_entity</strong>(entity)  &#x21d2; Entity </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a contextual entity to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_data_entity-instance_method" title="#add_data_entity (instance method)">#<strong>add_data_entity</strong>(entity)  &#x21d2; Entity </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Add a data entity to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_directory-instance_method" title="#add_directory (instance method)">#<strong>add_directory</strong>(source_directory, crate_path = nil, entity_class: ROCrate::Directory, **properties)  &#x21d2; Entity </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new directory and add it to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_external_file-instance_method" title="#add_external_file (instance method)">#<strong>add_external_file</strong>(source, entity_class: ROCrate::File, **properties)  &#x21d2; Entity </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new file that references a remote URI and add it to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_file-instance_method" title="#add_file (instance method)">#<strong>add_file</strong>(source, crate_path = nil, entity_class: ROCrate::File, **properties)  &#x21d2; Entity </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new file and add it to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_organization-instance_method" title="#add_organization (instance method)">#<strong>add_organization</strong>(id, properties = {})  &#x21d2; Organization </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new ROCrate::Organization and add it to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_person-instance_method" title="#add_person (instance method)">#<strong>add_person</strong>(id, properties = {})  &#x21d2; Person </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Create a new ROCrate::Person and add it to the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#canonical_id-instance_method" title="#canonical_id (instance method)">#<strong>canonical_id</strong>  &#x21d2; Addressable::URI </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The “canonical”, global ID of the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#claim-instance_method" title="#claim (instance method)">#<strong>claim</strong>(entity)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Copy the entity, but as if it was in this crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_entities-instance_method" title="#default_entities (instance method)">#<strong>default_entities</strong>  &#x21d2; Set&lt;Entity&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Entities for the metadata file and crate itself, which should be present in all RO-Crates.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>(entity, remove_orphaned: true)  &#x21d2; Entity<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove the entity from the RO-Crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dereference-instance_method" title="#dereference (instance method)">#<strong>dereference</strong>(id)  &#x21d2; Entity<sup>?</sup> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Lookup an Entity using the given ID (in this Entity&#39;s crate).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#entities-instance_method" title="#entities (instance method)">#<strong>entities</strong>  &#x21d2; Set&lt;Entity&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>All the entities within the crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#gc-instance_method" title="#gc (instance method)">#<strong>gc</strong> {|entity| ... } &#x21d2; Array&lt;ContextualEntity&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Remove any contextual entities that are not linked from any other entity.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_binding-instance_method" title="#get_binding (instance method)">#<strong>get_binding</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(id = IDENTIFIER, properties = {})  &#x21d2; Crate </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Initialize an empty RO-Crate.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#metadata-instance_method" title="#metadata (instance method)">#<strong>metadata</strong>  &#x21d2; Metadata </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The RO-Crate metadata file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#own_payload-instance_method" title="#own_payload (instance method)">#<strong>own_payload</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#payload-instance_method" title="#payload (instance method)">#<strong>payload</strong>  &#x21d2; Hash{String =&gt; Entry} </a>
    

    
      (also: #entries)
    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The file payload of the RO-Crate - a map of all the files/directories contained in the RO-Crate, where the key is the path relative to the crate&#39;s root, and the value is an Entry where the source data can be read.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#preview-instance_method" title="#preview (instance method)">#<strong>preview</strong>  &#x21d2; Preview </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>The RO-Crate preview file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#preview=-instance_method" title="#preview= (instance method)">#<strong>preview=</strong>(preview)  &#x21d2; Preview </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Set the RO-Crate preview file.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#properties-instance_method" title="#properties (instance method)">#<strong>properties</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#resolve_id-instance_method" title="#resolve_id (instance method)">#<strong>resolve_id</strong>(id)  &#x21d2; Addressable::URI </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Return an absolute URI for the given string ID, relative to the crate&#39;s canonical ID.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uuid-instance_method" title="#uuid (instance method)">#<strong>uuid</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="DataEntity.html" title="ROCrate::DataEntity (class)">DataEntity</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="DataEntity.html#filepath-instance_method" title="ROCrate::DataEntity#filepath (method)">#filepath</a></span>, <span class='object_link'><a href="DataEntity.html#specialize-class_method" title="ROCrate::DataEntity.specialize (method)">specialize</a></span></p>

  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Entity.html#==-instance_method" title="ROCrate::Entity#== (method)">#==</a></span>, <span class='object_link'><a href="Entity.html#[]-instance_method" title="ROCrate::Entity#[] (method)">#[]</a></span>, <span class='object_link'><a href="Entity.html#[]=-instance_method" title="ROCrate::Entity#[]= (method)">#[]=</a></span>, <span class='object_link'><a href="Entity.html#auto_dereference-instance_method" title="ROCrate::Entity#auto_dereference (method)">#auto_dereference</a></span>, <span class='object_link'><a href="Entity.html#auto_reference-instance_method" title="ROCrate::Entity#auto_reference (method)">#auto_reference</a></span>, <span class='object_link'><a href="Entity.html#eql%3F-instance_method" title="ROCrate::Entity#eql? (method)">#eql?</a></span>, <span class='object_link'><a href="Entity.html#external%3F-instance_method" title="ROCrate::Entity#external? (method)">#external?</a></span>, <span class='object_link'><a href="Entity.html#has_type%3F-instance_method" title="ROCrate::Entity#has_type? (method)">#has_type?</a></span>, <span class='object_link'><a href="Entity.html#hash-instance_method" title="ROCrate::Entity#hash (method)">#hash</a></span>, <span class='object_link'><a href="Entity.html#id-instance_method" title="ROCrate::Entity#id (method)">#id</a></span>, <span class='object_link'><a href="Entity.html#id=-instance_method" title="ROCrate::Entity#id= (method)">#id=</a></span>, <span class='object_link'><a href="Entity.html#inspect-instance_method" title="ROCrate::Entity#inspect (method)">#inspect</a></span>, <span class='object_link'><a href="Entity.html#linked_entities-instance_method" title="ROCrate::Entity#linked_entities (method)">#linked_entities</a></span>, <span class='object_link'><a href="Entity.html#properties-class_method" title="ROCrate::Entity.properties (method)">properties</a></span>, <span class='object_link'><a href="Entity.html#raw_properties-instance_method" title="ROCrate::Entity#raw_properties (method)">#raw_properties</a></span>, <span class='object_link'><a href="Entity.html#reference-instance_method" title="ROCrate::Entity#reference (method)">#reference</a></span>, <span class='object_link'><a href="Entity.html#to_json-instance_method" title="ROCrate::Entity#to_json (method)">#to_json</a></span>, <span class='object_link'><a href="Entity.html#type-instance_method" title="ROCrate::Entity#type (method)">#type</a></span>, <span class='object_link'><a href="Entity.html#type=-instance_method" title="ROCrate::Entity#type= (method)">#type=</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(id = IDENTIFIER, properties = {})  &#x21d2; <tt><span class='object_link'><a href="" title="ROCrate::Crate (class)">Crate</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Initialize an empty RO-Crate.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 24</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="#IDENTIFIER-constant" title="ROCrate::Crate::IDENTIFIER (constant)">IDENTIFIER</a></span></span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='ivar'>@data_entities</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='ivar'>@contextual_entities</span> <span class='op'>=</span> <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="contextual_entities-instance_method">
  
    #<strong>contextual_entities</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute contextual_entities.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_contextual_entities'>contextual_entities</span>
  <span class='ivar'>@contextual_entities</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="data_entities-instance_method">
  
    #<strong>data_entities</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute data_entities.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 8</span>

<span class='kw'>def</span> <span class='id identifier rubyid_data_entities'>data_entities</span>
  <span class='ivar'>@data_entities</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="format_id-class_method">
  
    .<strong>format_id</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 12</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_format_id'>format_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_i'>i</span> <span class='op'>=</span> <span class='kw'>super</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_i'>i</span><span class='period'>.</span><span class='id identifier rubyid_end_with?'>end_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>/</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id identifier rubyid_i'>i</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_i'>i</span><span class='embexpr_end'>}</span><span class='tstring_content'>/</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="format_local_id-class_method">
  
    .<strong>format_local_id</strong>(id)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 17</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_format_local_id'>format_local_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_id'>id</span> <span class='kw'>if</span> <span class='id identifier rubyid_id'>id</span> <span class='op'>==</span> <span class='const'><span class='object_link'><a href="#IDENTIFIER-constant" title="ROCrate::Crate::IDENTIFIER (constant)">IDENTIFIER</a></span></span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_all-instance_method">
  
    #<strong>add_all</strong>(source_directory, create_entities = true, include_hidden: false)  &#x21d2; <tt>Array&lt;<span class='object_link'><a href="DataEntity.html" title="ROCrate::DataEntity (class)">DataEntity</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Recursively add the contents of the given source directory at the root of the crate. Useful for quickly RO-Crate-ifying a directory. Creates data entities for each file/directory discovered (excluding the top level directory itself) if `create_entities` is true.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>source_directory</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Pathname</tt>, <tt>::File</tt>, <tt></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The source directory that will be included in the crate.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>create_entities</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Whether to create data entities for the added content, or just include them anonymously.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>include_hidden</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Whether to include hidden files, i.e. those prefixed by a `.` (period).</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="DataEntity.html" title="ROCrate::DataEntity (class)">DataEntity</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Any entities that were created from the directory contents. Will be empty if `create_entities` was false.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 90</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_all'>add_all</span><span class='lparen'>(</span><span class='id identifier rubyid_source_directory'>source_directory</span><span class='comma'>,</span> <span class='id identifier rubyid_create_entities'>create_entities</span> <span class='op'>=</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='label'>include_hidden:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_added'>added</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_create_entities'>create_entities</span>
    <span class='id identifier rubyid_list_all_files'>list_all_files</span><span class='lparen'>(</span><span class='id identifier rubyid_source_directory'>source_directory</span><span class='comma'>,</span> <span class='label'>include_hidden:</span> <span class='id identifier rubyid_include_hidden'>include_hidden</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_rel_path'>rel_path</span><span class='op'>|</span>
      <span class='id identifier rubyid_source_path'>source_path</span> <span class='op'>=</span> <span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_source_directory'>source_directory</span><span class='comma'>,</span> <span class='id identifier rubyid_rel_path'>rel_path</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_source_path'>source_path</span><span class='period'>.</span><span class='id identifier rubyid_directory?'>directory?</span>
        <span class='id identifier rubyid_added'>added</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_add_directory'>add_directory</span><span class='lparen'>(</span><span class='id identifier rubyid_source_path'>source_path</span><span class='comma'>,</span> <span class='id identifier rubyid_rel_path'>rel_path</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_added'>added</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_add_file'>add_file</span><span class='lparen'>(</span><span class='id identifier rubyid_source_path'>source_path</span><span class='comma'>,</span> <span class='id identifier rubyid_rel_path'>rel_path</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id identifier rubyid_populate_entries'>populate_entries</span><span class='lparen'>(</span><span class='const'>Pathname</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>::</span><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_expand_path'>expand_path</span><span class='lparen'>(</span><span class='id identifier rubyid_source_directory'>source_directory</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='label'>include_hidden:</span> <span class='id identifier rubyid_include_hidden'>include_hidden</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_added'>added</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_contact_point-instance_method">
  
    #<strong>add_contact_point</strong>(id, properties = {})  &#x21d2; <tt><span class='object_link'><a href="ContactPoint.html" title="ROCrate::ContactPoint (class)">ContactPoint</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new ROCrate::ContactPoint and add it to the crate</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An ID to identify this contact point, or blank to auto-generate an appropriate one, (or determine via the properties param)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; Object}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>A hash of JSON-LD properties to associate with this contact point.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ContactPoint.html" title="ROCrate::ContactPoint (class)">ContactPoint</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 127</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_contact_point'>add_contact_point</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_contextual_entity'>add_contextual_entity</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="ContactPoint.html" title="ROCrate::ContactPoint (class)">ContactPoint</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Entity.html#initialize-instance_method" title="ROCrate::Entity#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_contextual_entity-instance_method">
  
    #<strong>add_contextual_entity</strong>(entity)  &#x21d2; <tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Add a contextual entity to the crate</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>entity</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the entity to add to the crate.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the entity itself, or a clone of the entity “owned” by this crate.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 147</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_contextual_entity'>add_contextual_entity</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity'>entity</span> <span class='op'>=</span> <span class='id identifier rubyid_claim'>claim</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_contextual_entities'>contextual_entities</span><span class='period'>.</span><span class='id identifier rubyid_delete?'>delete?</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span> <span class='comment'># Remove (then re-add) the entity if it exists
</span>  <span class='id identifier rubyid_contextual_entities'>contextual_entities</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity'>entity</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_data_entity-instance_method">
  
    #<strong>add_data_entity</strong>(entity)  &#x21d2; <tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Add a data entity to the crate</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>entity</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the entity to add to the crate.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the entity itself, or a clone of the entity “owned” by this crate.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162
163
164</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 159</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_data_entity'>add_data_entity</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity'>entity</span> <span class='op'>=</span> <span class='id identifier rubyid_claim'>claim</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_data_entities'>data_entities</span><span class='period'>.</span><span class='id identifier rubyid_delete?'>delete?</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span> <span class='comment'># Remove (then re-add) the entity if it exists
</span>  <span class='id identifier rubyid_data_entities'>data_entities</span><span class='period'>.</span><span class='id identifier rubyid_add'>add</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity'>entity</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_directory-instance_method">
  
    #<strong>add_directory</strong>(source_directory, crate_path = nil, entity_class: ROCrate::Directory, **properties)  &#x21d2; <tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new directory and add it to the crate.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>source_directory</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Pathname</tt>, <tt>::File</tt>, <tt>#read</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The source directory that will be included in the crate.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>crate_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The relative path within the RO-Crate where this directory will be written.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>entity_class</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>ROCrate::Directory</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The class to use to instantiate the Entity, useful if you have created a subclass of ROCrate::Directory that you want to use. (defaults to ROCrate::Directory).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A hash of JSON-LD properties to associate with this directory.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 76</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_directory'>add_directory</span><span class='lparen'>(</span><span class='id identifier rubyid_source_directory'>source_directory</span><span class='comma'>,</span> <span class='id identifier rubyid_crate_path'>crate_path</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>entity_class:</span> <span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Directory.html" title="ROCrate::Directory (class)">Directory</a></span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity_class'>entity_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_source_directory'>source_directory</span><span class='comma'>,</span> <span class='id identifier rubyid_crate_path'>crate_path</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_add_data_entity'>add_data_entity</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_external_file-instance_method">
  
    #<strong>add_external_file</strong>(source, entity_class: ROCrate::File, **properties)  &#x21d2; <tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new file that references a remote URI and add it to the crate.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>source</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>URI</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The URI to add.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>entity_class</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>ROCrate::File</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The class to use to instantiate the Entity, useful if you have created a subclass of ROCrate::File that you want to use. (defaults to ROCrate::File).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A hash of JSON-LD properties to associate with this file.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 62</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_external_file'>add_external_file</span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='label'>entity_class:</span> <span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File.html" title="ROCrate::File (class)">File</a></span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity_class'>entity_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_add_data_entity'>add_data_entity</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_file-instance_method">
  
    #<strong>add_file</strong>(source, crate_path = nil, entity_class: ROCrate::File, **properties)  &#x21d2; <tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new file and add it to the crate.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>source</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>Pathname</tt>, <tt>::File</tt>, <tt>#read</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The source on the disk where this file will be read.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>crate_path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The relative path within the RO-Crate where this file will be written.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>entity_class</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>ROCrate::File</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>The class to use to instantiate the Entity, useful if you have created a subclass of ROCrate::File that you want to use. (defaults to ROCrate::File).</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; Object}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A hash of JSON-LD properties to associate with this file.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 49</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_file'>add_file</span><span class='lparen'>(</span><span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_crate_path'>crate_path</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='label'>entity_class:</span> <span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="File.html" title="ROCrate::File (class)">File</a></span></span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity_class'>entity_class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_source'>source</span><span class='comma'>,</span> <span class='id identifier rubyid_crate_path'>crate_path</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_tap'>tap</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_add_data_entity'>add_data_entity</span><span class='lparen'>(</span><span class='id identifier rubyid_e'>e</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_organization-instance_method">
  
    #<strong>add_organization</strong>(id, properties = {})  &#x21d2; <tt><span class='object_link'><a href="Organization.html" title="ROCrate::Organization (class)">Organization</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new ROCrate::Organization and add it to the crate</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An ID to identify this organization, or blank to auto-generate an appropriate one, (or determine via the properties param)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; Object}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>A hash of JSON-LD properties to associate with this organization.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Organization.html" title="ROCrate::Organization (class)">Organization</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


138
139
140</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 138</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_organization'>add_organization</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_contextual_entity'>add_contextual_entity</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Organization.html" title="ROCrate::Organization (class)">Organization</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Entity.html#initialize-instance_method" title="ROCrate::Entity#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add_person-instance_method">
  
    #<strong>add_person</strong>(id, properties = {})  &#x21d2; <tt><span class='object_link'><a href="Person.html" title="ROCrate::Person (class)">Person</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Create a new ROCrate::Person and add it to the crate</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An ID to identify this person, or blank to auto-generate an appropriate one, (or determine via the properties param)</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>properties</span>
      
      
        <span class='type'>(<tt>Hash{String =&gt; Object}</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>A hash of JSON-LD properties to associate with this person.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Person.html" title="ROCrate::Person (class)">Person</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 116</span>

<span class='kw'>def</span> <span class='id identifier rubyid_add_person'>add_person</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_add_contextual_entity'>add_contextual_entity</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Person.html" title="ROCrate::Person (class)">Person</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Entity.html#initialize-instance_method" title="ROCrate::Entity#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='comma'>,</span> <span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_properties'>properties</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="canonical_id-instance_method">
  
    #<strong>canonical_id</strong>  &#x21d2; <tt>Addressable::URI</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The “canonical”, global ID of the crate. If the crate was not given an absolute URI as its ID, it will use an “Archive and Package” (ARCP) URI with the UUID of the crate, for example:</p>

<pre class="code ruby"><code class="ruby">arcp://uuid,b3d6fa2b-4e49-43ba-bd89-464e948b7f0c/
</code></pre>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Addressable::URI</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 221</span>

<span class='kw'>def</span> <span class='id identifier rubyid_canonical_id'>canonical_id</span>
  <span class='ivar'>@canonical_id</span> <span class='op'>||=</span> <span class='const'>Addressable</span><span class='op'>::</span><span class='const'>URI</span><span class='period'>.</span><span class='id identifier rubyid_parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>arcp://uuid,</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_uuid'>uuid</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="claim-instance_method">
  
    #<strong>claim</strong>(entity)  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Copy the entity, but as if it was in this crate. (Or just return the entity if it was already included)</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


238
239
240
241</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 238</span>

<span class='kw'>def</span> <span class='id identifier rubyid_claim'>claim</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_entity'>entity</span> <span class='kw'>if</span> <span class='id identifier rubyid_entity'>entity</span><span class='period'>.</span><span class='id identifier rubyid_crate'>crate</span> <span class='op'>==</span> <span class='kw'>self</span>
  <span class='id identifier rubyid_entity'>entity</span><span class='period'>.</span><span class='id identifier rubyid_class'>class</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_crate'>crate</span><span class='comma'>,</span> <span class='id identifier rubyid_entity'>entity</span><span class='period'>.</span><span class='id identifier rubyid_id'>id</span><span class='comma'>,</span> <span class='id identifier rubyid_entity'>entity</span><span class='period'>.</span><span class='id identifier rubyid_raw_properties'>raw_properties</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_entities-instance_method">
  
    #<strong>default_entities</strong>  &#x21d2; <tt>Set&lt;<span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Entities for the metadata file and crate itself, which should be present in all RO-Crates.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Set&lt;<span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 203</span>

<span class='kw'>def</span> <span class='id identifier rubyid_default_entities'>default_entities</span>
  <span class='const'>Set</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_metadata'>metadata</span><span class='comma'>,</span> <span class='id identifier rubyid_preview'>preview</span><span class='comma'>,</span> <span class='kw'>self</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    #<strong>delete</strong>(entity, remove_orphaned: true)  &#x21d2; <tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Remove the entity from the RO-Crate.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>entity</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>, <tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The entity or ID of an entity to remove from the crate.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>remove_orphaned</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>Should linked contextual entities also be removed from the crate they are left dangling (nothing else is linked to them)?</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The entity that was deleted, or nil if nothing was deleted.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


277
278
279
280
281
282
283
284
285
286
287
288
289
290</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 277</span>

<span class='kw'>def</span> <span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='comma'>,</span> <span class='label'>remove_orphaned:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entity'>entity</span> <span class='op'>=</span> <span class='id identifier rubyid_dereference'>dereference</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_entity'>entity</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_entity'>entity</span>

  <span class='id identifier rubyid_deleted'>deleted</span> <span class='op'>=</span> <span class='id identifier rubyid_data_entities'>data_entities</span><span class='period'>.</span><span class='id identifier rubyid_delete?'>delete?</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id identifier rubyid_contextual_entities'>contextual_entities</span><span class='period'>.</span><span class='id identifier rubyid_delete?'>delete?</span><span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_deleted'>deleted</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_remove_orphaned'>remove_orphaned</span>
    <span class='id identifier rubyid_crate_entities'>crate_entities</span> <span class='op'>=</span> <span class='id identifier rubyid_crate'>crate</span><span class='period'>.</span><span class='id identifier rubyid_linked_entities'>linked_entities</span><span class='lparen'>(</span><span class='label'>deep:</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_to_remove'>to_remove</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_entity'>entity</span><span class='period'>.</span><span class='id identifier rubyid_linked_entities'>linked_entities</span><span class='lparen'>(</span><span class='label'>deep:</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='id identifier rubyid_crate_entities'>crate_entities</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_to_remove'>to_remove</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:delete</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_deleted'>deleted</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="dereference-instance_method">
  
    #<strong>dereference</strong>(id)  &#x21d2; <tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt><sup>?</sup> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Lookup an Entity using the given ID (in this Entity&#39;s crate).</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The ID to query.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 35</span>

<span class='kw'>def</span> <span class='id identifier rubyid_dereference'>dereference</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_entities'>entities</span><span class='period'>.</span><span class='id identifier rubyid_detect'>detect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_canonical_id'>canonical_id</span> <span class='op'>==</span> <span class='id identifier rubyid_crate'>crate</span><span class='period'>.</span><span class='id identifier rubyid_resolve_id'>resolve_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id identifier rubyid_id'>id</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="entities-instance_method">
  
    #<strong>entities</strong>  &#x21d2; <tt>Set&lt;<span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>All the entities within the crate. Includes contextual entities, data entities, the crate itself and its metadata file.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Set&lt;<span class='object_link'><a href="Entity.html" title="ROCrate::Entity (class)">Entity</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 195</span>

<span class='kw'>def</span> <span class='id identifier rubyid_entities'>entities</span>
  <span class='id identifier rubyid_default_entities'>default_entities</span> <span class='op'>|</span> <span class='id identifier rubyid_data_entities'>data_entities</span> <span class='op'>|</span> <span class='id identifier rubyid_contextual_entities'>contextual_entities</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="gc-instance_method">
  
    #<strong>gc</strong> {|entity| ... } &#x21d2; <tt>Array&lt;<span class='object_link'><a href="ContextualEntity.html" title="ROCrate::ContextualEntity (class)">ContextualEntity</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Remove any contextual entities that are not linked from any other entity. Optionally takes a block to decide whether the given entity should be removed or not, otherwise removes all unlinked entities.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>entity</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="ContextualEntity.html" title="ROCrate::ContextualEntity (class)">ContextualEntity</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>An unlinked contextual entity.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>remove Should this entity be removed?</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array&lt;<span class='object_link'><a href="ContextualEntity.html" title="ROCrate::ContextualEntity (class)">ContextualEntity</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The entities that were removed.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303
304</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 300</span>

<span class='kw'>def</span> <span class='id identifier rubyid_gc'>gc</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_unlinked_entities'>unlinked_entities</span> <span class='op'>=</span> <span class='id identifier rubyid_contextual_entities'>contextual_entities</span> <span class='op'>-</span> <span class='id identifier rubyid_metadata'>metadata</span><span class='period'>.</span><span class='id identifier rubyid_linked_entities'>linked_entities</span><span class='lparen'>(</span><span class='label'>deep:</span> <span class='kw'>true</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_unlinked_entities'>unlinked_entities</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='label'>remove_orphaned:</span> <span class='kw'>false</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_binding-instance_method">
  
    #<strong>get_binding</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


265
266
267</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 265</span>

<span class='kw'>def</span> <span class='id identifier rubyid_get_binding'>get_binding</span>
  <span class='id identifier rubyid_binding'>binding</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="metadata-instance_method">
  
    #<strong>metadata</strong>  &#x21d2; <tt><span class='object_link'><a href="Metadata.html" title="ROCrate::Metadata (class)">Metadata</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The RO-Crate metadata file</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Metadata.html" title="ROCrate::Metadata (class)">Metadata</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 170</span>

<span class='kw'>def</span> <span class='id identifier rubyid_metadata'>metadata</span>
  <span class='ivar'>@metadata</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Metadata.html" title="ROCrate::Metadata (class)">Metadata</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Metadata.html#initialize-instance_method" title="ROCrate::Metadata#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="own_payload-instance_method">
  
    #<strong>own_payload</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 243</span>

<span class='id identifier rubyid_alias_method'>alias_method</span> <span class='symbol'>:own_payload</span><span class='comma'>,</span> <span class='symbol'>:payload</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="payload-instance_method">
  
    #<strong>payload</strong>  &#x21d2; <tt>Hash{String =&gt; <span class='object_link'><a href="Entry.html" title="ROCrate::Entry (class)">Entry</a></span>}</tt> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='entries-instance_method'>entries</span></span>
    </span>
  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The file payload of the RO-Crate - a map of all the files/directories contained in the RO-Crate, where the key is the path relative to the crate&#39;s root, and the value is an Entry where the source data can be read.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Hash{String =&gt; <span class='object_link'><a href="Entry.html" title="ROCrate::Entry (class)">Entry</a></span>}</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>]</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252
253
254
255
256
257
258
259
260
261
262</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_payload'>payload</span>
  <span class='comment'># Gather a map of entries, starting from the crate itself, then any directory data entities, then finally any
</span>  <span class='comment'># file data entities. This ensures in the case of a conflict, the more &quot;specific&quot; data entities take priority.
</span>  <span class='id identifier rubyid_entries'>entries</span> <span class='op'>=</span> <span class='id identifier rubyid_own_payload'>own_payload</span>
  <span class='id identifier rubyid_sorted_entities'>sorted_entities</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_default_entities'>default_entities</span><span class='period'>.</span><span class='id identifier rubyid_delete'>delete</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='op'>|</span> <span class='id identifier rubyid_data_entities'>data_entities</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_sort_by'>sort_by</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id identifier rubyid_e'>e</span><span class='op'>|</span> <span class='id identifier rubyid_e'>e</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Directory.html" title="ROCrate::Directory (class)">Directory</a></span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='int'>1</span> <span class='rbrace'>}</span>

  <span class='id identifier rubyid_sorted_entities'>sorted_entities</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_entity'>entity</span><span class='op'>|</span>
    <span class='id identifier rubyid_entity'>entity</span><span class='period'>.</span><span class='id identifier rubyid_payload'>payload</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_entry'>entry</span><span class='op'>|</span>
      <span class='id identifier rubyid_entries'>entries</span><span class='lbracket'>[</span><span class='id identifier rubyid_path'>path</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_entry'>entry</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_entries'>entries</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preview-instance_method">
  
    #<strong>preview</strong>  &#x21d2; <tt><span class='object_link'><a href="Preview.html" title="ROCrate::Preview (class)">Preview</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>The RO-Crate preview file</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Preview.html" title="ROCrate::Preview (class)">Preview</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 178</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preview'>preview</span>
  <span class='ivar'>@preview</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="../ROCrate.html" title="ROCrate (module)">ROCrate</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Preview.html" title="ROCrate::Preview (class)">Preview</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Preview.html#initialize-instance_method" title="ROCrate::Preview#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="preview=-instance_method">
  
    #<strong>preview=</strong>(preview)  &#x21d2; <tt><span class='object_link'><a href="Preview.html" title="ROCrate::Preview (class)">Preview</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Set the RO-Crate preview file</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>preview</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Preview.html" title="ROCrate::Preview (class)">Preview</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the preview to set.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Preview.html" title="ROCrate::Preview (class)">Preview</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 187</span>

<span class='kw'>def</span> <span class='id identifier rubyid_preview='>preview=</span><span class='lparen'>(</span><span class='id identifier rubyid_preview'>preview</span><span class='rparen'>)</span>
  <span class='ivar'>@preview</span> <span class='op'>=</span> <span class='id identifier rubyid_claim'>claim</span><span class='lparen'>(</span><span class='id identifier rubyid_preview'>preview</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="properties-instance_method">
  
    #<strong>properties</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


207
208
209</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 207</span>

<span class='kw'>def</span> <span class='id identifier rubyid_properties'>properties</span>
  <span class='kw'>super</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>hasPart</span><span class='tstring_end'>&#39;</span></span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_data_entities'>data_entities</span><span class='period'>.</span><span class='id identifier rubyid_map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:reference</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="resolve_id-instance_method">
  
    #<strong>resolve_id</strong>(id)  &#x21d2; <tt>Addressable::URI</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Return an absolute URI for the given string ID, relative to the crate&#39;s canonical ID.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The ID to “join” onto the crate&#39;s base URI.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Addressable::URI</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 231</span>

<span class='kw'>def</span> <span class='id identifier rubyid_resolve_id'>resolve_id</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_canonical_id'>canonical_id</span><span class='period'>.</span><span class='id identifier rubyid_join'>join</span><span class='lparen'>(</span><span class='id identifier rubyid_id'>id</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="uuid-instance_method">
  
    #<strong>uuid</strong>  &#x21d2; <tt>Object</tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/ro_crate/model/crate.rb', line 211</span>

<span class='kw'>def</span> <span class='id identifier rubyid_uuid'>uuid</span>
  <span class='ivar'>@uuid</span> <span class='op'>||=</span> <span class='const'>SecureRandom</span><span class='period'>.</span><span class='id identifier rubyid_uuid'>uuid</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Tue Sep  6 14:55:42 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.25 (ruby-3.0.4).
</div>

    </div>
  </body>
</html>